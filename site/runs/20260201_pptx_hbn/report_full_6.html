<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>TMD 화합물의 성능 향상 메커니즘 분석</title>
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Fraunces:wght@300;500;700&family=Space+Grotesk:wght@400;600;700&family=JetBrains+Mono:wght@400;600&display=swap');
    :root {
      --bg: #0b0f14;
      --bg-2: #121821;
      --card: rgba(255, 255, 255, 0.06);
      --site-ink: #f5f7fb;
      --site-muted: rgba(245, 247, 251, 0.65);
      --accent: #4ee0b5;
      --accent-2: #6bd3ff;
      --edge: rgba(255, 255, 255, 0.15);
      --glow: rgba(78, 224, 181, 0.25);
      --ink: #0b1220;
      --muted: #425066;
      --accent-strong: #2fb892;
      --paper: rgba(255, 255, 255, 0.94);
      --paper-strong: #ffffff;
      --paper-alt: rgba(240, 245, 255, 0.6);
      --rule: rgba(15, 23, 42, 0.12);
      --shadow: 0 28px 70px rgba(15, 23, 42, 0.22);
      --link: var(--accent-2);
      --link-hover: var(--accent);
      --page-bg: radial-gradient(1200px 600px at 12% -10%, var(--glow), transparent 60%),
        radial-gradient(900px 540px at 92% 8%, rgba(107, 211, 255, 0.18), transparent 55%),
        linear-gradient(180deg, #0b111d 0%, var(--bg-2) 45%, var(--bg) 100%);
      --body-font: "Fraunces", "Charter", Georgia, serif;
      --heading-font: "Space Grotesk", "Segoe UI", sans-serif;
      --ui-font: "Space Grotesk", "Segoe UI", sans-serif;
      --mono-font: "JetBrains Mono", "Consolas", monospace;
    }
    :root[data-theme="sky"] {
      --bg: #0b1220;
      --bg-2: #0f1b2e;
      --card: rgba(255, 255, 255, 0.06);
      --site-ink: #f4f7ff;
      --site-muted: rgba(244, 247, 255, 0.62);
      --accent: #64b5ff;
      --accent-2: #8fd1ff;
      --edge: rgba(255, 255, 255, 0.18);
      --glow: rgba(100, 181, 255, 0.28);
      --accent-strong: #3f8ed1;
    }
    :root[data-theme="crimson"] {
      --bg: #120a0d;
      --bg-2: #1c0f16;
      --card: rgba(255, 255, 255, 0.06);
      --site-ink: #fff5f7;
      --site-muted: rgba(255, 245, 247, 0.62);
      --accent: #ff6b81;
      --accent-2: #ff9aa9;
      --edge: rgba(255, 255, 255, 0.15);
      --glow: rgba(255, 107, 129, 0.25);
      --accent-strong: #e3546d;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      color: var(--site-ink);
      background: var(--page-bg);
      font-family: var(--body-font);
      line-height: 1.7;
      letter-spacing: -0.01em;
      overflow-x: hidden;
    }
    .backdrop {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    .orb {
      position: absolute;
      border-radius: 999px;
      opacity: 0.6;
      mix-blend-mode: screen;
      filter: blur(0px);
      animation: float 16s ease-in-out infinite;
    }
    .orb-1 {
      width: 520px;
      height: 520px;
      background: radial-gradient(circle at 30% 30%, rgba(255, 122, 89, 0.55), transparent 60%);
      top: -220px;
      left: -160px;
    }
    .orb-2 {
      width: 440px;
      height: 440px;
      background: radial-gradient(circle at 60% 40%, rgba(14, 165, 164, 0.5), transparent 62%);
      top: 80px;
      right: -120px;
      animation-delay: -4s;
    }
    .orb-3 {
      width: 340px;
      height: 340px;
      background: radial-gradient(circle at 50% 50%, rgba(148, 163, 184, 0.35), transparent 70%);
      bottom: -180px;
      left: 22%;
      animation-delay: -8s;
    }
    .page {
      position: relative;
      z-index: 1;
      max-width: 1040px;
      margin: 56px auto 96px;
      padding: 0 28px;
    }
    .masthead {
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 18px 22px 22px;
      border: 1px solid var(--masthead-border, rgba(226, 232, 240, 0.18));
      border-radius: 18px;
      background: var(--masthead-bg, rgba(10, 14, 20, 0.55));
      backdrop-filter: blur(8px);
      margin-bottom: 36px;
      color: var(--masthead-text, #f8fafc);
      animation: fadeIn 0.7s ease-out both;
    }
    .masthead-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }
    .kicker {
      font-family: var(--ui-font);
      font-size: 0.82rem;
      letter-spacing: 0.28em;
      text-transform: uppercase;
      color: var(--masthead-kicker, rgba(255, 255, 255, 0.68));
    }
    .back-link {
      display: none;
      align-items: center;
      gap: 8px;
      font-family: var(--ui-font);
      font-size: 0.78rem;
      text-decoration: none;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--masthead-link-border, rgba(255, 255, 255, 0.2));
      color: var(--masthead-link, rgba(255, 255, 255, 0.78));
      background: var(--masthead-link-bg, rgba(15, 23, 42, 0.35));
      transition: all 0.2s ease;
    }
    .back-link:hover {
      color: #fff;
      border-color: rgba(255, 255, 255, 0.45);
      transform: translateY(-1px);
    }
    .report-title {
      font-family: var(--heading-font);
      font-size: clamp(2.2rem, 3.6vw, 3.6rem);
      margin: 0;
      line-height: 1.08;
      letter-spacing: -0.03em;
      color: var(--masthead-title, #f8fafc);
    }
    .report-deck {
      color: var(--masthead-deck, rgba(226, 232, 240, 0.8));
      font-size: 1.05rem;
      max-width: 720px;
    }
    .article {
      background: var(--paper);
      color: var(--ink);
      border: 1px solid rgba(255, 255, 255, 0.6);
      border-radius: 22px;
      padding: 40px 44px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      animation: rise 0.8s ease-out both;
    }
    .article > * { animation: rise 0.6s ease-out both; }
    .article > *:nth-child(1) { animation-delay: 0.05s; }
    .article > *:nth-child(2) { animation-delay: 0.1s; }
    .article > *:nth-child(3) { animation-delay: 0.15s; }
    .article > *:nth-child(4) { animation-delay: 0.2s; }
    .article > *:nth-child(5) { animation-delay: 0.25s; }
    .article h1, .article h2, .article h3, .article h4 {
      font-family: var(--heading-font);
      color: var(--ink);
    }
    .article h1 { font-size: 2rem; margin-top: 0; }
    .article h2 {
      font-size: 1.55rem;
      margin-top: 2.6rem;
      padding-top: 1rem;
      border-top: 1px solid var(--rule);
      position: relative;
      padding-left: 18px;
    }
    .article h2::before {
      content: '';
      position: absolute;
      left: 0;
      top: 1.45rem;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent-strong);
    }
    .article h3 { font-size: 1.2rem; margin-top: 1.7rem; color: #1f2937; }
    .article p { font-size: 1.05rem; }
    .article ul, .article ol { padding-left: 1.4rem; }
    .article blockquote {
      margin: 1.4rem 0;
      padding: 1rem 1.2rem;
      border-left: 3px solid var(--accent);
      background: rgba(15, 23, 42, 0.04);
    }
    .article a {
      color: var(--link);
      text-decoration: none;
      border-bottom: 1px solid transparent;
      transition: all 0.2s ease;
    }
    .article a:hover { color: var(--link-hover); border-bottom-color: var(--link-hover); }
    .article code {
      font-family: var(--mono-font);
      font-size: 0.94rem;
      background: rgba(148, 163, 184, 0.14);
      padding: 2px 6px;
      border-radius: 6px;
    }
    .article pre {
      background: rgba(148, 163, 184, 0.18);
      padding: 1rem 1.1rem;
      border-radius: 12px;
      overflow-x: auto;
    }
    .article table { border-collapse: collapse; width: 100%; margin: 1.4rem 0; }
    .article th, .article td { border: 1px solid var(--rule); padding: 10px 12px; }
    .article th { background: rgba(148, 163, 184, 0.15); text-align: left; }
    .article tr:nth-child(even) td { background: rgba(148, 163, 184, 0.08); }
    .article hr { border: none; border-top: 1px solid var(--rule); margin: 2rem 0; }
    .viewer-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.6);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 20;
    }
    .viewer-overlay.open { opacity: 1; pointer-events: auto; }
    .viewer-panel {
      position: fixed;
      top: 0;
      right: 0;
      height: 100vh;
      width: min(480px, 92vw);
      background: #fff;
      box-shadow: -20px 0 60px rgba(15, 23, 42, 0.25);
      transform: translateX(105%);
      transition: transform 0.25s ease;
      z-index: 30;
      display: flex;
      flex-direction: column;
    }
    .viewer-panel.open { transform: translateX(0); }
    .viewer-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 14px 16px;
      border-bottom: 1px solid #e2e8f0;
      background: #f8fafc;
    }
    .viewer-title { font-size: 0.95rem; color: var(--ink); flex: 1; }
    .viewer-actions { display: flex; gap: 8px; align-items: center; }
    .viewer-actions a {
      font-size: 0.78rem;
      text-decoration: none;
      color: var(--link);
    }
    .viewer-close {
      border: none;
      background: #1f2937;
      color: #fff;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      cursor: pointer;
    }
    .viewer-frame { flex: 1; border: none; width: 100%; border-radius: 0 0 16px 16px; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes rise { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(18px); } }
    body.template-default,
body.template-arxiv_preprint,
body.template-acs_review {
  --site-ink: var(--ink);
  --site-muted: var(--muted);
  --ink: #1d1b17;
  --muted: #59524a;
  --accent: #8b3f2d;
  --paper-alt: #f2ede3;
  --page-bg: radial-gradient(1200px 600px at 18% -12%, #efe9e0 0%, #f6f2ea 45%, #fdfcf9 100%);
  --body-font: "Iowan Old Style", "Charter", "Palatino Linotype", "Book Antiqua", Georgia, serif;
  --heading-font: "Avenir Next", "Gill Sans", "Trebuchet MS", "Helvetica Neue", sans-serif;
  --ui-font: "Avenir Next", "Gill Sans", "Trebuchet MS", "Helvetica Neue", sans-serif;
}

body.template-default .kicker,
body.template-arxiv_preprint .kicker,
body.template-acs_review .kicker {
  letter-spacing: 0.26em;
}

  </style>
</head>
<body class="theme-coral template-acs_review template-default">
  <div class="backdrop">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>
  <div class="page">
    <header class="masthead">
      <div class="masthead-top">
        <div class="kicker">FEDERLICHT</div>
        <a class="back-link" id="back-link" href="#">목록으로</a>
      </div>
      <div class="report-title">TMD 화합물의 성능 향상 메커니즘 분석</div>
      <div class="report-deck">Research review and tech survey</div>
    </header>
    <main class="article">
<h1>TMD 화합물의 성능 향상 메커니즘 분석</h1>
<p>Federlicht assisted and prompted by "Hyun-Jung Kim / AI Governance Team" — 2026-02-03 02:10</p>
<h2>Abstract</h2>
<p>본 리뷰는 WSe₂와 같은 전이금속 화합물(TMD)이 hexagonal boron nitride(hBN)으로 캡슐화된 후 열처리(어닐링)가 그들의 광발광(PL) 성능, 결함 상태 및 도핑 메커니즘에 미치는 영향을 분석한다. 어닐링 과정은 오염 제거, 버블 제거 및 결함 패시베이션을 통해 PL 성능을 향상시키는 중요한 단계로 나타났다. 특히, 어닐링에 따른 구조적 변화가 광학 및 전기적 특성 변화를 유도하는 기작을 설명하며, 이 리뷰는 이러한 메커니즘 및 거시적 적용 가능성을 제시한다. 결론적으로, 본 연구는 향후 추가 검증 및 개선이 필요한 분야를 식별하고, hBN 캡슐화와 어닐링의 조합이 향후 TMD 기반 소자의 성능 향상에 기여할 가능성을 제시한다.</p>
<h2>Introduction</h2>
<p>전이금속 화합물(TMDs)은 화학적 성질과 전기적 성질로 인해 광학 소자 및 전자 소자에서 이상적인 소재로 주목받고 있다. 그러나 이들의 광발광(PL) 성능 저하는 결함 및 오염, 도핑 등 여러 요인에 의해 악화된다. hexagonal boron nitride(hBN)으로의 캡슐화는 이와 같은 문제를 해결할 수 있는 방법 중 하나로 벤처되고 있으며, 이는 어닐링 과정을 통해 더욱 개선될 수 있다. 본 문서에서는 PL 저하의 주요 원인인 트랩, 오염, 결함, 도핑을 정리하고, hBN 캡슐화 및 어닐링 접근법의 역할과 기여를 고찰한다.</p>
<h2>Current Landscape</h2>
<h3>어닐링 레시피</h3>
<p>hBN 캡슐화 후 적용 가능한 저온(200-300°C), 중온(300-400°C), 고온(400°C 이상) 어닐링 과정을 분류하며, 각 조건에서의 PL 특성을 분석한다.</p>
<h3>캡슐화 없는 어닐과의 비교</h3>
<p>hBN 캡슐화 없는 어닐링과의 비교를 통해 hBN 캡슐화가 PL 극대화에 미치는 영향을 구체적으로 살펴본다.</p>
<h3>그래핀/hBN 캡슐화 디바이스 사례</h3>
<p>구체적인 디바이스 예시를 통해 그래핀/hBN 캡슐화가 도입된 TMD에서의 성능 개선 데이터를 제시하고, 관측 지표(PLQY, linewidth, lifetime, peak shift 등)를 종합한다.</p>
<h2>Mechanistic Insights</h2>
<p>PPTX에서 제시된 수치와 키워드에 기반하여 온도 400°C 이하에서의 산화 시작 및 O₂ 해리 장벽(0.52 eV) 등을 설명한다. 이러한 과정에서 Se vacancy와 O의 결합, 산소 확산 및 불순물 제거와 PL 특성 변화 간의 연관성을 단계적으로 고찰한다.</p>
<h2>Applications</h2>
<p>hBN 캡슐화와 어닐링을 통한 고품질 발광 소자 및 양자 광원 구현 가능성에 대해 논의하며, 이에 따른 재현성과 스케일업의 필요성을 강조한다. TMD 기반 소자의 신뢰성 증대에 기여할 수 있는 다양한 측면을 살핀다.</p>
<h2>Challenges</h2>
<p>어닐링 과정 중 발생할 수 있는 분위기 조절의 어려움, 열이력, 계면 버블 및 오염 정량 분석의 부족 등을 구체적으로 분석하고, 지속적인 데이터 제한이 미치는 영향을 정리한다.</p>
<h2>Outlook</h2>
<p>향후 검증 실험을 통해 분위기에 따라 다양한 어닐링 매트릭스의 효과를 연구하고, isotopic O₂의 사용, in situ Raman/XPS 분석, TEM/EELS, time-resolved PL 분석 등이 필요함을 시사한다.</p>
<h2>Risks &amp; Gaps</h2>
<p>현재 아카이브에는 공개된 정보의 부족으로 인해 WSe₂의 hBN 캡슐화 어닐링의 효과를 일반화하는 데 한계가 있음을 지적한다. 특히, PPTX에 언급된 Nanotechnology 28 (2017) 395702와 Nat. Commun. (2019) 10:2330 논문의 원문이 확보되지 않은 점을 명시한다.</p>
<h2>Critics</h2>
<h3>hBN 캡슐화 어닐링의 보편성 과장</h3>
<ul>
<li>열 손상 및 산화 촉진 가능성이 있다.</li>
<li>캡슐화의 효과가 샘플 의존적으로 나타날 수 있다.</li>
<li>측정 아티팩트가 결과에 영향을 미칠 수 있다.</li>
</ul>
<h2>Appendix</h2>
<h3>핵심 파라미터 및 수치</h3>
<p>PPTX 슬라이드 기반으로 핵심 파라미터 및 주요 수치를 정리한 표.</p>
<h3>용어집</h3>
<p>본 연구에서 사용된 주요 약어 및 용어의 정의.</p>
<h3>조건-결과 매핑 테이블</h3>
<p>특정 어닐링 조건과 그로 인한 결과(PL 증가, 결함 감소 등)를 매핑한 테이블.</p>
<h2>Report Prompt</h2>
<p>Language: Korean</p>
<p>Template: acs_review<br />
Depth: deep  </p>
<p>목표/범위: 로컬 PPTX “NCML hBN encapsulation annealing”을 1차 근거로 삼아, hBN 캡슐화 어닐링이 WSe2(및 일반 TMD) 광발광(PL)·결함·도핑·산화 거동에 미치는 영향을 ACS 스타일 리뷰로 정리하라. 공정 조건(온도/시간/분위기)–구조/계면 변화–광학/전기 특성의 인과를 중심으로, 합의된 결론과 가설적 신호를 분리한다.<br />
pptx 파일의 주요 내용에 대해 심도있게 설명하고 정리하라.</p>
<p>핵심 포함 항목(필수 섹션 모두 포함):<br />
- Abstract(5–7문장): 다루는 시스템(WSe2/TMD, hBN encapsulation, annealing), 핵심 메커니즘(오염/버블 제거, 디도핑, 결함 패시베이션/산화 억제 또는 유발), 결론·검증 필요점 요약.<br />
- Introduction: TMD PL 저하 원인(트랩/오염/결함/도핑)과 hBN 캡슐화+어닐링 접근의 위치. 약어(PL, TMD, hBN, Se vacancy 등) 정의.<br />
- Current Landscape: (i) hBN 캡슐화 후 저/중/고온 어닐 레시피, (ii) 캡슐화 없는 어닐 대비, (iii) 그래핀/hBN 캡슐화 디바이스 사례로 범주화. 각 범주별 “관측 지표(PLQY, linewidth, lifetime, peak shift 등)” 정리.<br />
- Mechanistic Insights: PPTX의 수치/키워드(예: 산화 시작 ~400°C, O2 dissociation barrier 0.52 eV, adsorption energy, vacancy migration barrier 등)를 중심으로 Se vacancy–O 결합, 산소 확산/해리, 계면 오염 제거와 PL 변화의 연결을 단계적(원인→중간상→결과)으로 설명.<br />
- Applications: 고품질 발광/양자광원/소자 신뢰성 관점의 적용과, 재현성·스케일업 공백 명시.<br />
- Challenges: 분위기 제어, 열이력, 계면 버블/오염 정량, in situ 분석 부재 등 “데이터 한계”를 구체화.<br />
- Outlook: 검증 실험(분위기별 어닐 매트릭스, isotopic O2, in situ Raman/XPS, TEM/EELS, time-resolved PL) 제안.<br />
- Risks &amp; Gaps: 현재 아카이브에 OpenAlex/arXiv/논문 PDF가 없어 PPTX 외 주장 일반화에는 공개정보 한계가 있음을 명시하고, 특히 PPTX 내 인용으로 보이는 Nanotechnology 28 (2017) 395702, Nat. Commun. (2019) 10:2330 등은 “원문 미확보”로 표시.<br />
- Critics: “hBN 캡슐화 어닐링의 보편성 과장” 등 반론(열 손상/산화 촉진 가능, 샘플 의존성, 측정 아티팩트)을 헤드라인+불릿으로 제시.<br />
- Appendix: PPTX 슬라이드 기반 핵심 파라미터/수치 표, 용어집, 조건-결과 매핑 테이블.  </p>
<p>증거/인용 정책: PPTX 텍스트/도표에서 확인 가능한 문장은 (슬라이드 번호/그림) 형태로 내부 인용. tavily_search.jsonl은 “인덱스 참고”로만 쓰고, 원문 PDF 미확보 항목은 추정·일반론으로 단정하지 말 것(공개정보 한계 라벨).  </p>
<p>언어 지시: 본문은 한국어, 고유명사/저널/논문 제목은 원문 유지. 학술적·재료/화학 중심 톤 유지, 합의(Consensus) vs 가설(Speculative) 명확히 구분.</p>
<h2>Miscellaneous</h2>
<div class="misc-block">
<ul>
<li>Generated at: 2026-02-03 02:10:56</li>
<li>Duration: 00:02:02 (122.16s)</li>
<li>Model: gpt-4o-mini</li>
<li>Quality model: gpt-4o-mini</li>
<li>Quality strategy: pairwise</li>
<li>Quality iterations: 1</li>
<li>Template: acs_review</li>
<li>Language: Korean</li>
<li>Tags: hbn, TMD, PPTX, 캡슐화, 산화</li>
<li>Output format: html</li>
<li>PDF compile: disabled</li>
<li>Run overview: <a href="report_views/report_run_overview.md-40ef65a9.html" data-viewer="report_views/report_run_overview.md-40ef65a9.html" data-raw="report/run_overview.md" class="viewer-link">./report/run_overview.md</a></li>
<li>Report overview: <a href="report_views/report_run_overview_report_full_6.md-7088ee68.html" data-viewer="report_views/report_run_overview_report_full_6.md-7088ee68.html" data-raw="report/run_overview_report_full_6.md" class="viewer-link">./report/run_overview_report_full_6.md</a></li>
<li>Report workflow: <a href="report_views/report_notes_report_workflow.md-bd2306de.html" data-viewer="report_views/report_notes_report_workflow.md-bd2306de.html" data-raw="report_notes/report_workflow.md" class="viewer-link">./report_notes/report_workflow.md</a></li>
<li>Archive index: <a href="report_views/archive_20260201_pptx_hbn-index.md-0f4fb347.html" data-viewer="report_views/archive_20260201_pptx_hbn-index.md-0f4fb347.html" data-raw="archive/20260201_pptx_hbn-index.md" class="viewer-link">./archive/20260201_pptx_hbn-index.md</a></li>
<li>Instruction file: <a href="report_views/instruction_20260201_pptx_hbn.txt-88abb151.html" data-viewer="report_views/instruction_20260201_pptx_hbn.txt-88abb151.html" data-raw="instruction/20260201_pptx_hbn.txt" class="viewer-link">./instruction/20260201_pptx_hbn.txt</a></li>
<li>Report prompt: <a href="report_views/instruction_report_prompt_report_full_6.txt-6e1d9629.html" data-viewer="report_views/instruction_report_prompt_report_full_6.txt-6e1d9629.html" data-raw="instruction/report_prompt_report_full_6.txt" class="viewer-link">./instruction/report_prompt_report_full_6.txt</a></li>
</ul>
</div>
    </main>
  </div>
  <div id="viewer-overlay" class="viewer-overlay"></div>
  <aside id="viewer-panel" class="viewer-panel" aria-hidden="true">
    <div class="viewer-header">
      <div class="viewer-title" id="viewer-title">Source preview</div>
      <div class="viewer-actions">
        <a id="viewer-raw" href="#" target="_blank" rel="noopener">Open raw</a>
        <button class="viewer-close" id="viewer-close" aria-label="Close">x</button>
      </div>
    </div>
    <iframe id="viewer-frame" class="viewer-frame" title="Source preview"></iframe>
  </aside>
  <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      const themeParam = params.get('theme');
      const storedTheme = localStorage.getItem('federlicht.theme');
      const theme = themeParam || storedTheme;
      if (theme) {
        document.documentElement.dataset.theme = theme;
        localStorage.setItem('federlicht.theme', theme);
      }
      const backLink = document.getElementById('back-link');
      if (backLink) {
        const path = window.location.pathname.replace(/\\/g, '/');
        const idx = path.lastIndexOf('/runs/');
        if (idx !== -1) {
          backLink.href = `${path.slice(0, idx)}/index.html`;
          backLink.style.display = 'inline-flex';
        }
      }
      const panel = document.getElementById('viewer-panel');
      const overlay = document.getElementById('viewer-overlay');
      const frame = document.getElementById('viewer-frame');
      const rawLink = document.getElementById('viewer-raw');
      const title = document.getElementById('viewer-title');
      const closeBtn = document.getElementById('viewer-close');
      function closeViewer() {
        panel.classList.remove('open');
        overlay.classList.remove('open');
        panel.setAttribute('aria-hidden', 'true');
        frame.src = 'about:blank';
      }
      function openViewer(viewer, raw, label) {
        frame.src = viewer;
        rawLink.href = raw || viewer;
        title.textContent = label || 'Source preview';
        panel.classList.add('open');
        overlay.classList.add('open');
        panel.setAttribute('aria-hidden', 'false');
      }
      document.querySelectorAll('.viewer-link').forEach((link) => {
        link.addEventListener('click', (ev) => {
          ev.preventDefault();
          const viewer = link.getAttribute('data-viewer') || link.href;
          const raw = link.getAttribute('data-raw');
          const label = link.textContent || 'Source preview';
          if (viewer) openViewer(viewer, raw, label);
        });
      });
      overlay.addEventListener('click', closeViewer);
      closeBtn.addEventListener('click', closeViewer);
    })();
  </script>
</body>
</html>
